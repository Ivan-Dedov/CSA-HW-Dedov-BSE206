# Домашнее задание №1
Дедов Иван Николаевич, БПИ-206


## Описание полученного задания

### Номер варианта
208

### Номер условия
(208 - 1) % 14 + 1 = 12

### Номер дополнительной функции
((208 - 1) / 14) % 25 + 1 = 15

### Полученное условие
| Обобщенный артефакт, используемый в задании | Базовые альтернативы | Общие для всех  альтернатив переменные | Общие для всех альтернатив функции | Обработка данных |
| - | - | - | - | - |
| Животные | 1. Рыбы (место проживания – перечислимый тип: река, море, озеро...) <br/> 2. Птицы (отношение к перелету: перелетные, остающиеся на зимовку – булевская величина) <br/> 3. Звери (хищники, травоядные, насекомоядные... – перечислимый тип) | 1. Название – строка символов, <br/> 2. Вес в граммах (целое) | Частное от деления суммы кодов незашифрованной строки на число символов в этой строке на вес (действительное число) | Упорядочить элементы контейнера по убыванию используя сортировку с помощью «дерева» (Heap Sort). В качестве ключей для сортировки и других действий используются результаты функции, общей для всех альтернатив. |


## Структурная схема изучаемой архитектуры ВС с размещенной на ней разработанной программой

### Таблица типов
| Тип данных | Занимаемая память (в байтах) \[индекс в памяти\] |
| - | - |
| int | 4 |
| char | 1 |
| **struct animal** { <br/>&nbsp;&nbsp;&nbsp;&nbsp;food_source: enum { CARNIVORE, HERBIVORE, INSECTIVORE, OMNIVORE } <br/>} | 4 \[0\] |
| **struct bird** { <br/>&nbsp;&nbsp;&nbsp;&nbsp;does_migrate: int <br/>} | 4 \[0\] |
| **struct fish** { <br/>&nbsp;&nbsp;&nbsp;&nbsp;habitat: enum { LAKE, OCEAN, SEA } <br/>} | 4 \[0\] |
| **struct creature** { <br/>&nbsp;&nbsp;&nbsp;&nbsp;name: char\[64\] <br/>&nbsp;&nbsp;&nbsp;&nbsp;weight: int <br/>&nbsp;&nbsp;&nbsp;&nbsp;creature_type: int <br/>&nbsp;&nbsp;&nbsp;&nbsp;specification: **union** { <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;animal: animal <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bird: bird <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fish: fish <br/>&nbsp;&nbsp;&nbsp;&nbsp;} <br/>} | **76** <br/> 64 \[0\] <br/> 4 \[64\] <br/> 4 \[68\] <br/><br/> 4 \[72\] <br/> 4 \[72\] <br/> 4 \[72\] <br/><br/><br/> |

### Глобальная память
Не используется (макрос ```MAX_NUMBER_OF_ELEMENTS``` инлайнится, и нигде не хранится).

### Память программы

#### Детальная память методов

##### ```int main(int argc, char *argv[])```

| Переменная | Занимаемая память (в байтах) \[индекс в памяти\] |
| - | - |
| argc: int | 4 \[0\] |
| argv: char** | 8 \[4\] |
| creatures: creatures\[10000\] | 760 000 \[12\] |
| length: int | 4 \[760 012\] |
| number_of_elements^: int | 4 \[760 016\] |

^ Переменная создается не всегда, а только при выполнении условия.

| Информация в куче |
| - |
| "HW1.exe" |
| "-f" |
| "input.txt" |
| "output.txt" |

##### ```get_creature_metric(creature *creature)```

| Переменная | Занимаемая память (в байтах) \[индекс в памяти\] |
| - | - |
| creature: creature* | 4 \[0\] |
| name: char*  | 4 \[4\] |
| name_length: size_t | 4 \[8\] |
| name_char_sum: double | 8 \[12\] |
| i: size_t | 4 \[20\] |

##### ```void copy(creature *target, creature *destination)```

| Переменная | Занимаемая память (в байтах) \[индекс в памяти\] |
| - | - |
| target: creature* | 4 \[0\] |
| destination: creature*  | 4 \[4\] |
| name_length: size_t | 4 \[8\] |
| i: size_t | 4 \[12\] |

##### ```creature generate_creature(int index)```

| Переменная | Занимаемая память (в байтах) \[индекс в памяти\] |
| - | - |
| index: int | 4 \[0\] |
| weight_lower_bound: int | 4 \[4\] |
| weight_upper_bound: int | 4 \[8\] |
| creature_type_lower_bound: int | 4 \[12\] |
| creature_type_upper_bound: int | 4 \[16\] |
| food_source_lower_bound: int | 4 \[20\] |
| food_source_upper_bound: int | 4 \[24\] |
| does_migrate_lower_bound: int | 4 \[28\] |
| does_migrate_upper_bound: int | 4 \[32\] |
| habitat_lower_bound: int | 4 \[36\] |
| habitat_upper_bound: int | 4 \[40\] |
| creature: creature | 76 \[44\] |
| food_source: int | 4 \[120\] |
| does_migrate: int | 4 \[124\] |
| habitat: int | 4 \[128\] |

#### Стек вызовов

Описан в виде дерева, так как вызов некоторых функций зависит от выполнения условий. Если вызов метода зависит от выполнения условия, то оба варианта сгруппированы (например, ```read_data_from_file``` и ```generate_randomly```).

```
main 
│
│
├───read_data_from_file
├───generate_randomly
│   └───generate_creature
│       └───get_creature_name
│
│
├───write_data_to_std
│   └───print_creature_to_std
│
│
├───write_data_to_file
│   └───print_creature_to_file
│
│
├───heap_sort_desc
│   ├───heapify
│   │   ├───compare
│   │   │   └───get_creature_metric
│   │   │
│   │   │
│   │   ├───swap
│   │   │   └───copy
│   │   │
│   │   │
│   │   └───heapify*
│   │
│   │
│   ├───swap
│   │      └───copy
│   │
│   │
│   └───heapify*
│
│
├───write_data_to_std
│   └───print_creature_to_std
│
│
└───write_data_to_file
    └───print_creature_to_file
```

\* Метод вызывается рекурсивно (количество раз определяется в алгоритме).


## Требуемые метрики, определяющие характеристики программы, для различных тестовых прогонов

### Число интерфейсных модулей (заголовочных файлов)
6

### Число модулей реализации (файлов с определением программных объектов)
4

### Общий размер исходных текстов
| Файл                | Размер                     |
| ------------------- | -------------------------- |
| ```animal.h```      | 437 байт                   |
| ```bird.h```        | 283 байт                   |
| ```creature.c```    | 9 644 байт                 |
| ```creature.h```    | 2 437 байт                 |
| ```data_loader.c``` | 4 874 байт                 |
| ```data_loader.h``` | 2 053 байт                 |
| ```fish.h```        | 331 байт                   |
| ```heap_sort.c```   | 1 118 байт                 |
| ```heap_sort.h```   | 800 байт                   |
| ```main.c```        | 2 477 байт                 |
| **Всего**           | **24 454 байт ≈ 23.88 Кб** |

### Полученный размер исполняемого кода (если он формируется)
48 128 байт = 47 Кб

### Время выполнения программы для различных тестовых наборов данных:
| Тестовый файл    | Время выполнения |
| ---------------- | ---------------- |
| ```test01.txt``` | 0.011 с          |
| ```test02.txt``` | 0.012 с          |
| ```test03.txt``` | 3.384 с          |
| ```test04.txt``` | 0.001 с\*        |
| ```test05.txt``` | 0.003 с          |
| ```test06.txt``` | 0.003 с          |
| ```test07.txt``` | 0.001 с\*        |
| ```test08.txt``` | 0.001 с\*        |
| ```test09.txt``` | 0.001 с\*        |
| ```test10.txt``` | 0.475 с          |

\* В тесте введены некорректные данные. При нахождении первого некорректного набора программа тут же завершается.


## Данные, демонстрирующие сравнение с характеристиками ранее разработанных программ

Нет – это первая программа.
